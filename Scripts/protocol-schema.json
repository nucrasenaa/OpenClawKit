{
  "protocolVersion": 3,
  "errorCodes": [
    "NOT_LINKED",
    "NOT_PAIRED",
    "AGENT_TIMEOUT",
    "INVALID_REQUEST",
    "UNAVAILABLE"
  ],
  "structs": [
    {
      "name": "ConnectParams",
      "fields": [
        { "name": "minProtocol", "type": "Int" },
        { "name": "maxProtocol", "type": "Int" },
        { "name": "client", "type": "[String: AnyCodable]" },
        { "name": "caps", "type": "[String]?", "optional": true },
        { "name": "commands", "type": "[String]?", "optional": true },
        { "name": "permissions", "type": "[String: AnyCodable]?", "optional": true },
        { "name": "pathEnv", "type": "String?", "optional": true },
        { "name": "role", "type": "String?", "optional": true },
        { "name": "scopes", "type": "[String]?", "optional": true },
        { "name": "device", "type": "[String: AnyCodable]?", "optional": true },
        { "name": "auth", "type": "[String: AnyCodable]?", "optional": true }
      ]
    },
    {
      "name": "RequestFrame",
      "fields": [
        { "name": "type", "type": "String" },
        { "name": "id", "type": "String" },
        { "name": "method", "type": "String" },
        { "name": "params", "type": "AnyCodable?", "optional": true }
      ]
    },
    {
      "name": "ResponseFrame",
      "fields": [
        { "name": "type", "type": "String" },
        { "name": "id", "type": "String" },
        { "name": "ok", "type": "Bool" },
        { "name": "payload", "type": "AnyCodable?", "optional": true },
        { "name": "error", "type": "ErrorShape?", "optional": true }
      ]
    },
    {
      "name": "EventFrame",
      "fields": [
        { "name": "type", "type": "String" },
        { "name": "event", "type": "String" },
        { "name": "payload", "type": "AnyCodable?", "optional": true },
        { "name": "seq", "type": "Int?", "optional": true }
      ]
    },
    {
      "name": "ErrorShape",
      "fields": [
        { "name": "code", "type": "ErrorCode" },
        { "name": "message", "type": "String" }
      ]
    }
  ]
}

